import{d as k,r as v,c as y,w as s,a as E,k as p,b,e as a,f as m,m as U,V as h,n as C,h as n,q as c,s as g,t as S,v as R,x as f}from"./main-B70GkIj-.js";import{r as _}from"./form-validation-CyjMhnzu.js";import{_ as x}from"./social-login-button.vue_vue_type_script_setup_true_lang-AyLHztC-.js";import{V as T,_ as $,a as I}from"./VForm-C5FypBKk.js";import{_ as N}from"./password-field.vue_vue_type_script_setup_true_lang-CFmEeVXv.js";import{V as d}from"./VContainer-DYD4C6sI.js";import{V as G}from"./VTextField-CfpYqE7h.js";import"./VSheet-BzbwK1M5.js";/* empty css              */const A={class:"text-center"},B=m("p",{class:"text-center text-h5 font-weight-black mt-2"}," Sign up",-1),D=m("p",{class:"text-center font-weight-black mt-2"}," Welcome to sibs.ai",-1),F={class:"text-center text-medium-emphasis"},M=k({__name:"signup-view",setup(L){const w=E(),e=v({email:"",checkingEmail:!1,password:"",formValid:!1,signingUp:!1,message:{text:"",title:""}});async function V(i){try{if(e.checkingEmail=!0,(await f.doesEmailExist({email:i})).doesExist)return"Email already exists. Please sign in instead"}catch(t){return t.isSuperTokensGeneralError===!0?t.message:"Error checking email"}finally{e.checkingEmail=!1}return!0}async function u(i,t){e.signingUp=!0;try{let r=await f.signUp({formFields:[{id:"email",value:i},{id:"password",value:t}]});r.status==="FIELD_ERROR"?r.formFields.forEach(l=>{l.id==="email"?e.message={error:!0,title:"Invalid email",text:l.error}:l.id==="password"&&(e.message={error:!0,title:"Invalid password",text:l.error})}):r.status==="SIGN_UP_NOT_ALLOWED"?e.message={error:!0,title:"Sign up not allowed",text:r.reason}:w.push({name:"authorized"})}catch(r){r.isSuperTokensGeneralError===!0?e.message={error:!0,title:"Sign up not allowed",text:r.message}:e.message={error:!0,title:"Sign up not allowed"}}finally{e.signingUp=!1}}return(i,t)=>{const r=p("router-link"),l=p("v-gap");return b(),y(d,null,{default:s(()=>[a(R,{elevated:"",elevation:"4",class:"mx-auto","max-width":"344"},{title:s(()=>[m("div",A,[a(U,null,{default:s(()=>[a(h,{icon:"custom:logo",size:"x-large",color:"primary"})]),_:1})]),B]),subtitle:s(()=>[D]),default:s(()=>[a(C,null,{default:s(()=>[m("p",F,[n(" Already have an account? "),a(r,{to:{name:"signin"}},{default:s(()=>[n("Sign in")]),_:1})]),a(c,{class:"mt-4"}),a(d,null,{default:s(()=>[a(T,{modelValue:e.formValid,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formValid=o)},{default:s(()=>[a(G,{loading:e.checkingEmail,"append-inner-icon":"mdi-email-outline",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o),color:"primary",label:"Email",type:"email",density:"comfortable",autocomplete:"username",autofocus:"",rules:[g(_).required,g(_).email,V]},null,8,["loading","modelValue","rules"]),a(N,{password:e.password,"onUpdate:password":t[1]||(t[1]=o=>e.password=o)},null,8,["password"]),a(l,{y:"4"}),a($,{error:e.message.error??!1,msg:e.message.text,"onUpdate:msg":t[2]||(t[2]=o=>e.message.text=o),title:e.message.title,"onUpdate:title":t[3]||(t[3]=o=>e.message.title=o),class:"mb-4"},null,8,["error","msg","title"]),a(I,{loading:e.signingUp,disabled:!e.formValid||e.signingUp,color:"primary",block:"",onKeydown:t[4]||(t[4]=S(o=>u(e.email,e.password),["enter"])),onClick:t[5]||(t[5]=o=>u(e.email,e.password))},{default:s(()=>[n(" Continue")]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])]),_:1}),a(c,null,{default:s(()=>[n("or")]),_:1}),a(d,null,{default:s(()=>[a(x,{icon:"custom:google",name:"Google",callbackRoute:"google"}),a(l,{y:"4"}),a(x,{icon:"custom:facebook",name:"Facebook",callbackRoute:"facebook"})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{M as default};
