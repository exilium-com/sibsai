import{L as U,O as K,at as xe,aa as x,bx as we,T as Z,e as t,F as G,B as le,S as N,W as ze,aC as Pe,aw as B,X as Me,ao as pe,aq as de,bj as Ce,by as ke,bg as Se,bz as Le,aD as he,bo as Re,bl as Ye,V as R,Y as Ue,a6 as We,b3 as Ve,a8 as Xe,ay as Ee,aP as ne,a7 as je,ar as Oe,as as Ge,b4 as qe,aA as He,b5 as Ke,ab as Ze,d as I,$ as P,r as J,o as ie,az as Je,b as f,c as y,ae as Qe,w as i,g as Y,ah as Te,a$ as et,v as tt,l as m,a0 as re,ai as at,n as se,m as nt,bA as lt,h as w,z as D,C as A,I as $e,D as it,f as M,aU as W,y as q,H as De,s as v,aV as X,E as rt,q as me,a5 as Ae,bB as st,bC as E,af as ot,bD as ut,u as ct,aH as dt,au as mt,br as ft,bE as ye,j as ht}from"./main-B70GkIj-.js";import{V as H}from"./VRow-CuQ7f1Ee.js";import{V as k}from"./VCol-BMSgih9K.js";import{_ as yt}from"./mermaid-graph.vue_vue_type_style_index_0_lang-BKvM6I0T.js";import{V as fe}from"./VContainer-DYD4C6sI.js";const Ie=U({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:Boolean,width:{type:[Number,String],default:300}},"Line"),Be=U({autoLineWidth:Boolean,...Ie()},"VBarline"),ge=K()({name:"VBarline",props:Be(),setup(e,n){let{slots:a}=n;const u=xe(),l=x(()=>e.id||`barline-${u}`),c=x(()=>Number(e.autoDrawDuration)||500),r=x(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),o=x(()=>parseFloat(e.lineWidth)||4),d=x(()=>Math.max(e.modelValue.length*o.value,Number(e.width))),S=x(()=>({minX:0,maxX:d.value,minY:0,maxY:parseInt(e.height,10)})),V=x(()=>e.modelValue.map(h=>we(h,e.itemValue,h)));function C(h,s){const{minX:_,maxX:b,minY:T,maxY:$}=s,L=h.length;let Q=e.max!=null?Number(e.max):Math.max(...h),j=e.min!=null?Number(e.min):Math.min(...h);j>0&&e.min==null&&(j=0),Q<0&&e.max==null&&(Q=0);const ee=b/L,te=($-T)/(Q-j||1),oe=$-Math.abs(j*te);return h.map((O,ue)=>{const ce=Math.abs(te*O);return{x:_+ue*ee,y:oe-ce+ +(O<0)*ce,height:ce,value:O}})}const z=x(()=>{const h=[],s=C(V.value,S.value),_=s.length;for(let b=0;h.length<_;b++){const T=s[b];let $=e.labels[b];$||($=typeof T=="object"?T.value:T),h.push({x:T.x,value:String($)})}return h}),g=x(()=>C(V.value,S.value)),p=x(()=>(Math.abs(g.value[0].x-g.value[1].x)-o.value)/2);Z(()=>{const h=e.gradient.slice().length?e.gradient.slice().reverse():[""];return t("svg",{display:"block"},[t("defs",null,[t("linearGradient",{id:l.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[h.map((s,_)=>t("stop",{offset:_/Math.max(h.length-1,1),"stop-color":s||"currentColor"},null))])]),t("clipPath",{id:`${l.value}-clip`},[g.value.map(s=>t("rect",{x:s.x+p.value,y:s.y,width:o.value,height:s.height,rx:typeof e.smooth=="number"?e.smooth:e.smooth?2:0,ry:typeof e.smooth=="number"?e.smooth:e.smooth?2:0},[e.autoDraw&&t(G,null,[t("animate",{attributeName:"y",from:s.y+s.height,to:s.y,dur:`${c.value}ms`,fill:"freeze"},null),t("animate",{attributeName:"height",from:"0",to:s.height,dur:`${c.value}ms`,fill:"freeze"},null)])]))]),r.value&&t("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[z.value.map((s,_)=>{var b;return t("text",{x:s.x+p.value+o.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((b=a.label)==null?void 0:b.call(a,{index:_,value:s.value}))??s.value])})]),t("g",{"clip-path":`url(#${l.value}-clip)`,fill:`url(#${l.value})`},[t("rect",{x:0,y:0,width:Math.max(e.modelValue.length*o.value,Number(e.width)),height:e.height},null)])])})}});function gt(e,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const l=e.shift(),c=e[e.length-1];return(a?`M${l.x} ${u-l.x+2} L${l.x} ${l.y}`:`M${l.x} ${l.y}`)+e.map((r,o)=>{const d=e[o+1],S=e[o-1]||l,V=d&&vt(d,r,S);if(!d||V)return`L${r.x} ${r.y}`;const C=Math.min(ve(S,r),ve(d,r)),g=C/2<n?C/2:n,p=_e(S,r,g),h=_e(d,r,g);return`L${p.x} ${p.y}S${r.x} ${r.y} ${h.x} ${h.y}`}).join("")+(a?`L${c.x} ${u-l.x+2} Z`:"")}function ae(e){return parseInt(e,10)}function vt(e,n,a){return ae(e.x+a.x)===ae(2*n.x)&&ae(e.y+a.y)===ae(2*n.y)}function ve(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function _e(e,n,a){const u={x:e.x-n.x,y:e.y-n.y},l=Math.sqrt(u.x*u.x+u.y*u.y),c={x:u.x/l,y:u.y/l};return{x:n.x+c.x*a,y:n.y+c.y*a}}const Ne=U({fill:Boolean,...Ie()},"VTrendline"),be=K()({name:"VTrendline",props:Ne(),setup(e,n){let{slots:a}=n;const u=xe(),l=x(()=>e.id||`trendline-${u}`),c=x(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),r=le(0),o=le(null);function d(s,_){const{minX:b,maxX:T,minY:$,maxY:L}=_,Q=s.length,j=e.max!=null?Number(e.max):Math.max(...s),ee=e.min!=null?Number(e.min):Math.min(...s),te=(T-b)/(Q-1),oe=(L-$)/(j-ee||1);return s.map((O,ue)=>({x:b+ue*te,y:L-(O-ee)*oe,value:O}))}const S=x(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),V=x(()=>parseFloat(e.lineWidth)||4),C=x(()=>Number(e.width)),z=x(()=>{const s=Number(e.padding);return{minX:s,maxX:C.value-s,minY:s,maxY:parseInt(e.height,10)-s}}),g=x(()=>e.modelValue.map(s=>we(s,e.itemValue,s))),p=x(()=>{const s=[],_=d(g.value,z.value),b=_.length;for(let T=0;s.length<b;T++){const $=_[T];let L=e.labels[T];L||(L=typeof $=="object"?$.value:$),s.push({x:$.x,value:String(L)})}return s});N(()=>e.modelValue,async()=>{if(await ze(),!e.autoDraw||!o.value)return;const s=o.value,_=s.getTotalLength();e.fill?(s.style.transformOrigin="bottom center",s.style.transition="none",s.style.transform="scaleY(0)",s.getBoundingClientRect(),s.style.transition=`transform ${c.value}ms ${e.autoDrawEasing}`,s.style.transform="scaleY(1)"):(s.style.strokeDasharray=`${_}`,s.style.strokeDashoffset=`${_}`,s.getBoundingClientRect(),s.style.transition=`stroke-dashoffset ${c.value}ms ${e.autoDrawEasing}`,s.style.strokeDashoffset="0"),r.value=_},{immediate:!0});function h(s){return gt(d(g.value,z.value),e.smooth?8:Number(e.smooth),s,parseInt(e.height,10))}Z(()=>{var _;const s=e.gradient.slice().length?e.gradient.slice().reverse():[""];return t("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[t("defs",null,[t("linearGradient",{id:l.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[s.map((b,T)=>t("stop",{offset:T/Math.max(s.length-1,1),"stop-color":b||"currentColor"},null))])]),S.value&&t("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[p.value.map((b,T)=>{var $;return t("text",{x:b.x+V.value/2+V.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[(($=a.label)==null?void 0:$.call(a,{index:T,value:b.value}))??b.value])})]),t("path",{ref:o,d:h(e.fill),fill:e.fill?`url(#${l.value})`:"none",stroke:e.fill?"none":`url(#${l.value})`},null),e.fill&&t("path",{d:h(!1),fill:"none",stroke:e.color??((_=e.gradient)==null?void 0:_[0])},null)])})}}),_t=U({type:{type:String,default:"trend"},...Be(),...Ne()},"VSparkline"),bt=K()({name:"VSparkline",props:_t(),setup(e,n){let{slots:a}=n;const{textColorClasses:u,textColorStyles:l}=Pe(B(e,"color")),c=x(()=>!!(e.showLabels||e.labels.length>0||a!=null&&a.label)),r=x(()=>{let o=parseInt(e.height,10);return c.value&&(o+=parseInt(e.labelSize,10)*1.5),o});Z(()=>{const o=e.type==="trend"?be:ge,d=e.type==="trend"?be.filterProps(e):ge.filterProps(e);return t(o,Me({key:e.type,class:u.value,style:l.value,viewBox:`0 0 ${e.width} ${parseInt(r.value,10)}`},d),a)})}}),xt=U({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:pe,iconColor:String,lineColor:String,...de(),...Ce(),...ke(),...Se()},"VTimelineDivider"),wt=K()({name:"VTimelineDivider",props:xt(),setup(e,n){let{slots:a}=n;const{sizeClasses:u,sizeStyles:l}=Le(e,"v-timeline-divider__dot"),{backgroundColorStyles:c,backgroundColorClasses:r}=he(B(e,"dotColor")),{roundedClasses:o}=Re(e,"v-timeline-divider__dot"),{elevationClasses:d}=Ye(e),{backgroundColorClasses:S,backgroundColorStyles:V}=he(B(e,"lineColor"));return Z(()=>t("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[t("div",{class:["v-timeline-divider__before",S.value],style:V.value},null),!e.hideDot&&t("div",{key:"dot",class:["v-timeline-divider__dot",d.value,o.value,u.value],style:l.value},[t("div",{class:["v-timeline-divider__inner-dot",r.value,o.value],style:c.value},[a.default?t(Ue,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},a.default):t(R,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),t("div",{class:["v-timeline-divider__after",S.value],style:V.value},null)])),{}}}),Fe=U({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:pe,iconColor:String,lineInset:[Number,String],...de(),...We(),...Se(),...Ce(),...ke(),...Ve()},"VTimelineItem"),pt=K()({name:"VTimelineItem",props:Fe(),setup(e,n){let{slots:a}=n;const{dimensionStyles:u}=Xe(e),l=Ee(0),c=le();return N(c,r=>{var o;r&&(l.value=((o=r.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:o.getBoundingClientRect().width)??0)},{flush:"post"}),Z(()=>{var r,o;return t("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":ne(l.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${ne(e.lineInset)})`:ne(0)},e.style]},[t("div",{class:"v-timeline-item__body",style:u.value},[(r=a.default)==null?void 0:r.call(a)]),t(wt,{ref:c,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:a.icon}),e.density!=="compact"&&t("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((o=a.opposite)==null?void 0:o.call(a))])])}),{}}}),Ct=U({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...je(Fe({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...de(),...Oe(),...Ve(),...Ge()},"VTimeline"),kt=K()({name:"VTimeline",props:Ct(),setup(e,n){let{slots:a}=n;const{themeClasses:u}=qe(e),{densityClasses:l}=He(e),{rtlClasses:c}=Ke();Ze({VTimelineDivider:{lineColor:B(e,"lineColor")},VTimelineItem:{density:B(e,"density"),dotColor:B(e,"dotColor"),fillDot:B(e,"fillDot"),hideOpposite:B(e,"hideOpposite"),iconColor:B(e,"iconColor"),lineColor:B(e,"lineColor"),lineInset:B(e,"lineInset"),size:B(e,"size")}});const r=x(()=>{const d=e.side?e.side:e.density!=="default"?"end":null;return d&&`v-timeline--side-${d}`}),o=x(()=>{const d=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return d;case"start":return d[0];case"end":return d[1];default:return null}});return Z(()=>t(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,o.value,{"v-timeline--inset-line":!!e.lineInset},u.value,l.value,r.value,c.value,e.class],style:[{"--v-timeline-line-thickness":ne(e.lineThickness)},e.style]},a)),{}}}),F=I({__name:"card-favorite",props:{cardType:{}},setup(e){const n=P(),a=J({fav:!1,showFavoriteIcon:!0}),u=e;function l(){var d,S,V;return((V=(S=(d=n.person)==null?void 0:d.preferences)==null?void 0:S.favorites)==null?void 0:V.includes(u.cardType))??!1}ie(()=>{a.fav=l(),a.showFavoriteIcon=Je("showFavoriteIcon",!0)}),N(()=>n.person,()=>{a.fav=l()});async function c(){var C,z,g,p,h,s,_;if(a.fav==l()){m.debug(m.context(),"no change");return}let o={},d={};a.fav?d.favorites=((g=(z=(C=n.person)==null?void 0:C.preferences)==null?void 0:z.favorites)==null?void 0:g.concat(u.cardType))??[u.cardType]:d.favorites=((s=(h=(p=n.person)==null?void 0:p.preferences)==null?void 0:h.favorites)==null?void 0:s.filter(b=>b!=u.cardType))??[],o.preferences=d,m.debug(m.context(),"favorites = ",o.preferences.favorites,"array length = ",(_=o.preferences.favorites)==null?void 0:_.length);const{data:S,error:V}=await re.PUT("/api/person/me",{body:o});V?m.error(m.context(),V):m.debug(m.context(),{data:S}),await at()}function r(){a.fav=!a.fav,c()}return(o,d)=>(f(),y(tt,{id:u.cardType},Qe({default:i(()=>[et(o.$slots,"default")]),_:2},[a.showFavoriteIcon?{name:"append",fn:i(()=>[t(Y,{icon:a.fav?"mdi-heart":"mdi-heart-outline",variant:"plain",onClick:Te(r,["prevent"])},null,8,["icon"])]),key:"0"}:void 0]),1032,["id"]))}}),St=I({__name:"card-weather",props:{city:{},weather:{},temperature:{},temperature_unit:{},humidity:{},wind_speed:{},metric:{type:Boolean},icon:{},alert:{}},setup(e){const n=e;let a=[{day:"Tuesday",icon:"mdi-white-balance-sunny",temp:"24°/12°"},{day:"Wednesday",icon:"mdi-white-balance-sunny",temp:"22°/14°"},{day:"Thursday",icon:"mdi-cloud",temp:"25°/15°"}];function u(c){return Math.floor(c*1.60934)}const l=J({wind:n.metric?Math.floor(n.wind_speed)+"km/h":u(n.wind_speed)+"mph",expand:!1});return(c,r)=>(f(),y(F,{cardType:"Weather",title:n.city,subtitle:n.weather},{default:i(()=>[t(se,{class:"py-0"},{default:i(()=>[t(H,{class:"align-center"},{default:i(()=>[t(k,null,{default:i(()=>[t(nt,{size:"x-large"},{default:i(()=>[t(lt,{src:n.icon},null,8,["src"])]),_:1})]),_:1}),t(k,{class:"text-h5 text-right"},{default:i(()=>[w(D(n.temperature)+" ° "+D(n.temperature_unit),1)]),_:1})]),_:1}),n.alert?(f(),y(H,{key:0},{default:i(()=>[t(k,null,{default:i(()=>[t(R,{icon:"mdi-alert",size:"18",color:"error",class:"me-1 pb-1"}),w(" "+D(n.alert),1)]),_:1})]),_:1})):A("",!0),t(H,{class:"pb-6 align-center"},{default:i(()=>[t(k,{cols:"6"},{default:i(()=>[t(R,{icon:"mdi-weather-windy"}),w(" "+D(l.wind),1)]),_:1}),t(k,{cols:"6",class:"text-right"},{default:i(()=>[t(R,{icon:"mdi-water-percent"}),w(" "+D(n.humidity)+"% ",1)]),_:1})]),_:1})]),_:1}),t($e,null,{default:i(()=>[it(M("div",null,[t(W,{class:"bg-transparent"},{default:i(()=>[(f(!0),q(G,null,De(v(a),o=>(f(),y(X,{key:o.day,title:o.day,"append-icon":o.icon,subtitle:o.temp},null,8,["title","append-icon","subtitle"]))),128))]),_:1})],512),[[rt,l.expand]])]),_:1}),t(me),t(Ae,null,{default:i(()=>[t(Y,{onClick:r[0]||(r[0]=o=>l.expand=!l.expand)},{default:i(()=>[w(D(l.expand?"Hide Forecast":"Forecast"),1)]),_:1})]),_:1})]),_:1},8,["title","subtitle"]))}}),Vt={class:"mb-1"},Tt={class:"font-weight-normal"},$t=I({__name:"card-today",setup(e){const n=J({expand:!1});let a=[{message:"Take cholesterol pill",time:"10:42am",color:"deep-purple-lighten-1",medicines:!0},{message:"Prepare to leave for dentist appointment",time:"11:45am",color:"green",medicines:!1},{message:"Take fiber pills",time:"3pm",color:"deep-purple-lighten-1",medicines:!0}],u=x(()=>n.expand?a:a.slice(0,1));return(l,c)=>(f(),y(F,{cardType:"Today",title:"Today"},{default:i(()=>[t(st,null,{subtitle:i(()=>[t(R,{icon:"mdi-clock",size:"18",color:"error",class:"me-1 pb-1"}),w(" Sunday, Feb 4th, 8:55AM ")]),_:1}),t(se,null,{default:i(()=>[t(kt,{density:"compact",align:"start"},{default:i(()=>[(f(!0),q(G,null,De(v(u),r=>(f(),y(pt,{key:r.time,"dot-color":r.color,size:"x-small"},{default:i(()=>[M("div",Vt,[M("div",Tt,[M("strong",null,D(r.time),1)]),M("div",null,D(r.message),1),r.medicines?(f(),y(H,{key:0},{default:i(()=>[t(k,null,{default:i(()=>[t(Y,{color:"primary",class:"mt-2"},{default:i(()=>[w("Taken")]),_:1})]),_:1}),t(k,null,{default:i(()=>[t(Y,{color:"primary",class:"mt-2"},{default:i(()=>[w("Skipped")]),_:1})]),_:1})]),_:1})):A("",!0)])]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1}),t($e),t(me),t(Ae,null,{default:i(()=>[t(Y,{onClick:c[0]||(c[0]=r=>n.expand=!n.expand)},{default:i(()=>[w(D(n.expand?"See next reminder":"See all reminders"),1)]),_:1})]),_:1})]),_:1}))}}),Dt=I({__name:"card-news",setup(e){return(n,a)=>(f(),y(F,{cardType:"News",title:"News"},{default:i(()=>[t(W,null,{default:i(()=>[t(X,{"prepend-icon":"mdi-format-float-left"},{default:i(()=>[w(" 49ers win and go to super-bowl, new recipe for a healthy breakfast ")]),_:1})]),_:1})]),_:1}))}}),At=I({__name:"card-chats",setup(e){const n=P();return(a,u)=>{var l;return f(),y(F,{cardType:"Chats",title:"Latest chats",subtitle:v(E)((l=v(n).currentAccount)==null?void 0:l.user)},{default:i(()=>[t(W,null,{default:i(()=>[t(X,{"prepend-icon":"mdi-comment-multiple",density:"compact"},{default:i(()=>[w(" Talked to Luana two hours ago, talked to Fabio 10 days ago ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),It=M("br",null,null,-1),Bt=M("br",null,null,-1),Nt=I({__name:"card-profile",setup(e){const n=P();return N(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{m.debug(m.context(),"user changed")}),(a,u)=>(f(),y(F,{cardType:"Profile",title:"Profile",href:"/profile"},{default:i(()=>[t(se,null,{default:i(()=>[t(H,null,{default:i(()=>[t(k,{cols:"auto"},{default:i(()=>{var l,c,r;return[t(ot,{picture:(l=v(n).currentAccount)==null?void 0:l.user.avatar,firstName:(c=v(n).currentAccount)==null?void 0:c.user.given_name,lastName:(r=v(n).currentAccount)==null?void 0:r.user.family_name},null,8,["picture","firstName","lastName"])]}),_:1}),t(k,{cols:"auto"},{default:i(()=>{var l,c,r;return[w(D(v(E)((l=v(n).currentAccount)==null?void 0:l.user))+" ",1),It,w(" "+D((c=v(n).currentAccount)==null?void 0:c.user.email)+" ",1),Bt,w(" "+D(v(ut)((r=v(n).currentAccount)==null?void 0:r.user))+" years old ",1)]}),_:1})]),_:1})]),_:1})]),_:1}))}}),Ft=I({__name:"card-family",setup(e){const n=P();N(()=>{var l;return(l=n.currentAccount)==null?void 0:l.user},async()=>{m.debug(m.context(),"user changed"),await u()});const a=J({familyMap:void 0});async function u(){var r;m.debug(m.context(),"entering");const{data:l,error:c}=await re.GET("/api/person/me/family",{params:{query:{format:"mermaid_mindmap"}}});c||l.mermaid_mindmap==null?(a.familyMap=`mindmap
  id((**${(r=n.currentAccount)==null?void 0:r.user.given_name}**<br>*self*))
  :::self level0
`,c&&m.error(m.context(),c)):(a.familyMap=l.mermaid_mindmap,m.debug(m.context(),a.familyMap))}return ie(async()=>{await u()}),(l,c)=>(f(),y(F,{cardType:"Family",title:"Family",href:"/family"},{default:i(()=>[t(fe,null,{default:i(()=>[t(yt,{content:a.familyMap,fit:!0,onClick:c[0]||(c[0]=Te(()=>{},["prevent"]))},null,8,["content"])]),_:1})]),_:1}))}}),zt=M("div",{class:"subheading font-weight-light text-grey"}," ??? ",-1),Pt=M("span",{class:"text-caption text-grey font-weight-light"},"Last interaction 26 minutes ago",-1),Mt=I({__name:"card-usage",setup(e){const n=P();N(()=>{var c;return(c=n.currentAccount)==null?void 0:c.user},()=>{m.debug(m.context(),"user changed")});const a=[["#222"],["#42b3f4"],["red","orange","yellow"],["purple","violet"],["#00c6ff","#F0F","#FF0"],["#f72047","#ffd200","#1feaea"]],u=[0,3,6,9,12,15,18,21],l=[200,675,410,390,310,460,250,240];return(c,r)=>{var o;return f(),y(F,{cardType:"Usage",title:"Usage",subtitle:v(E)((o=v(n).currentAccount)==null?void 0:o.user)+"'s interactions",class:"overflow-visible"},{default:i(()=>[t(fe,null,{default:i(()=>[t(bt,{labels:u,"model-value":l,gradient:a[2],smooth:!0,padding:"8","line-width":"6","auto-line-width":!1,"stroke-linecap":"round","gradient-direction":"top",fill:!1,type:"bar","auto-draw":""},null,8,["gradient"])]),_:1}),t(se,{class:"pt-0"},{default:i(()=>[zt,t(me,{class:"my-2"}),t(R,{class:"me-2",size:"small"},{default:i(()=>[w(" mdi-clock ")]),_:1}),Pt]),_:1})]),_:1},8,["subtitle"])}}}),Lt=I({__name:"card-meds",setup(e){const n=P();return N(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{m.debug(m.context(),"user changed")}),(a,u)=>{var l;return f(),y(F,{cardType:"Meds",title:"Medications",subtitle:v(E)((l=v(n).currentAccount)==null?void 0:l.user)+"'s list",href:"/profile"},{default:i(()=>[t(W,null,{default:i(()=>[t(X,{"prepend-icon":"mdi-pill-multiple"},{default:i(()=>[w(" Atovarstatin, Vitamin D, Levothyroxine, Vitamin C, Aspirin, Vitamin B-12 ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),Rt=I({__name:"card-sharing",setup(e){const n=P();N(()=>{var l;return(l=n.currentAccount)==null?void 0:l.user},async()=>{m.debug(m.context(),"user changed"),await u()});const a=J({sharingCount:0});async function u(){var l,c;if(m.debug(m.context(),"entering"),a.sharingCount=0,(l=n.currentAccount)!=null&&l.id){const{data:r,error:o}=await re.GET("/api/account/{account_id}/admins",{params:{path:{account_id:(c=n.currentAccount)==null?void 0:c.id}}});o&&m.error(m.context(),o),a.sharingCount=r?r.length-1:0}}return ie(async()=>{await u()}),(l,c)=>{var r;return f(),y(F,{cardType:"Sharing",title:"Sharing",subtitle:v(E)((r=v(n).currentAccount)==null?void 0:r.user),to:"/sharing"},{default:i(()=>[t(W,null,{default:i(()=>[t(X,{"prepend-icon":"mdi-human-greeting-variant"},{default:i(()=>[a.sharingCount>0?(f(),q(G,{key:0},[w(" Sharing data with "+D(a.sharingCount)+" person"+D(a.sharingCount>1?"s":""),1)],64)):(f(),q(G,{key:1},[w(" Not sharing with anyone yet ")],64)),v(n).invitationCount>0?(f(),q(G,{key:2},[w(" , "+D(v(n).invitationCount)+" pending invitation"+D(v(n).invitationCount>1?"s":""),1)],64)):A("",!0)]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),Yt=I({__name:"card-concerns",setup(e){const n=P();return N(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{m.debug(m.context(),"user changed")}),(a,u)=>{var l;return f(),y(F,{cardType:"Concerns",title:"Concerns",subtitle:v(E)((l=v(n).currentAccount)==null?void 0:l.user)},{default:i(()=>[t(W,null,{default:i(()=>[t(X,null,{prepend:i(()=>[t(R,{color:"red"},{default:i(()=>[w("mdi-alert")]),_:1})]),default:i(()=>[w(" Asked emergency contact to call ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),Ut=I({__name:"card-interests",setup(e){const n=P();return N(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{m.debug(m.context(),"user changed")}),(a,u)=>{var l;return f(),y(F,{cardType:"Interests",title:"Interests",subtitle:v(E)((l=v(n).currentAccount)==null?void 0:l.user)},{default:i(()=>[t(W,null,{default:i(()=>[t(X,{"prepend-icon":"mdi-star"},{default:i(()=>[w(" Sports, Hiking, Biking, Reading, Cooking, Gardening ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),Wt={key:0,class:"pt-4 text-end"},Xt=I({__name:"cards-view",props:{onlyFavorites:{type:Boolean}},setup(e){const n=ct(),a=e;let u=le(!a.onlyFavorites);m.debug(m.context(),">>>> home page, isAuthenticated",n.isAuthenticated);const{xs:l,sm:c}=dt(),r=x(()=>c.value||l.value?12:6),o=P(),d=J({daily_updates:void 0,city:void 0,favorites:[]});function S(){var g,p,h,s,_,b;d.favorites=((p=(g=o.person)==null?void 0:g.preferences)==null?void 0:p.favorites)??[],m.debug(m.context(),"person = ",o.person,"preferences = ",(h=o.person)==null?void 0:h.preferences,"favorites = ",(_=(s=o.person)==null?void 0:s.preferences)==null?void 0:_.favorites,"array length = ",(b=d.favorites)==null?void 0:b.length)}function V(g){return d.favorites.includes(g)}function C(g){return u.value||V(g)}ie(()=>{S(),mt("showFavoriteIcon",u)}),N(()=>o.person,()=>{S()}),N(()=>[o.currentAccount],async(g,p)=>{var h,s;o.currentAccount&&(m.debug(m.context(),"currentAccount changed, fetching daily updates",{newValue:g},{oldValue:p}),await z(),(s=(h=d.daily_updates)==null?void 0:h.weather)!=null&&s.city?d.city=[d.daily_updates.weather.city,d.daily_updates.weather.country].filter(Boolean).join(", "):d.city="")},{immediate:!0});async function z(){if(!o.currentAccount)return;const{data:g,error:p}=await re.GET("/api/account/{account_id}/daily_updates",{params:{path:{account_id:o.currentAccount.id}}});p&&m.error(m.context(),p),g&&(m.debug(m.context(),g),d.daily_updates=g)}return(g,p)=>(f(),y(fe,{class:"v-col-sm-12 v-col-lg-6"},{default:i(()=>[t(H,{dense:""},{default:i(()=>[t(ft,{name:"grow"},{default:i(()=>[C("Today")?(f(),y(k,{key:0,cols:r.value},{default:i(()=>[t($t,{text1:"Dentist appointment",text2:"Tomorrow at 10am"})]),_:1},8,["cols"])):A("",!0),C("Weather")&&d.daily_updates&&d.daily_updates.weather?(f(),y(k,{key:1,cols:r.value},{default:i(()=>[t(St,{height:"100%",city:d.city??"-",weather:d.daily_updates.weather.description,temperature:d.daily_updates.weather.temperature,temperature_unit:"C",icon:d.daily_updates.weather.icon,wind_speed:d.daily_updates.weather.wind_speed,metric:!0,humidity:d.daily_updates.weather.humidity},null,8,["city","weather","temperature","icon","wind_speed","humidity"])]),_:1},8,["cols"])):A("",!0),C("Chats")?(f(),y(k,{key:2,cols:r.value},{default:i(()=>[t(At,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("News")?(f(),y(k,{key:3,cols:r.value},{default:i(()=>[t(Dt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Profile")?(f(),y(k,{key:4,cols:r.value},{default:i(()=>[t(Nt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Family")?(f(),y(k,{key:5,cols:r.value},{default:i(()=>[t(Ft,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Usage")?(f(),y(k,{key:6,cols:r.value},{default:i(()=>[t(Mt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Meds")?(f(),y(k,{key:7,cols:r.value},{default:i(()=>[t(Lt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Sharing")?(f(),y(k,{key:8,cols:r.value},{default:i(()=>[t(Rt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Concerns")?(f(),y(k,{key:9,cols:r.value},{default:i(()=>[t(Yt,{height:"100%"})]),_:1},8,["cols"])):A("",!0),C("Interests")?(f(),y(k,{key:10,cols:r.value},{default:i(()=>[t(Ut,{height:"100%"})]),_:1},8,["cols"])):A("",!0)]),_:1})]),_:1}),a.onlyFavorites?(f(),q("div",Wt,[v(u)?(f(),y(Y,{key:1,block:"",variant:"plain",onClick:p[1]||(p[1]=h=>ye(u)?u.value=!1:u=!1)},{default:i(()=>[w("Show favorites")]),_:1})):(f(),y(Y,{key:0,block:"",variant:"plain",onClick:p[0]||(p[0]=h=>ye(u)?u.value=!0:u=!0)},{default:i(()=>[w("Show more")]),_:1}))])):A("",!0)]),_:1}))}}),Ht=ht(Xt,[["__scopeId","data-v-3c92facd"]]);export{Ht as F};
