import{L as S,a6 as B,bg as P,as as T,O as I,aD as R,aw as A,a8 as L,bl as $,b4 as D,a9 as z,aa as U,aB as j,T as E,e as n,d as F,bu as H,r as M,bv as N,bw as O,s as _,b as g,c as p,w as r,V as u,C as v,aT as q,v as G,g as k,G as J,$ as K,l as f,a0 as V,j as Q}from"./main-B70GkIj-.js";import{V as W}from"./VContainer-DYD4C6sI.js";import{V as X}from"./VRow-CuQ7f1Ee.js";import{V as x}from"./VCol-BMSgih9K.js";import{V as Y}from"./VTextField-CfpYqE7h.js";const Z={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ee(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[i])}function y(e){const[i,a]=e.split("@");return Array.from({length:a}).map(()=>b(i))}function b(e){let i=[];if(!e)return i;const a=Z[e];if(e!==a){if(e.includes(","))return w(e);if(e.includes("@"))return y(e);a.includes(",")?i=w(a):a.includes("@")?i=y(a):a&&i.push(b(a))}return[ee(e,i)]}function w(e){return e.replace(/\s/g,"").split(",").map(b)}const te=S({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...B(),...P(),...T()},"VSkeletonLoader"),le=I()({name:"VSkeletonLoader",props:te(),setup(e,i){let{slots:a}=i;const{backgroundColorClasses:t,backgroundColorStyles:d}=R(A(e,"color")),{dimensionStyles:c}=L(e),{elevationClasses:h}=$(e),{themeClasses:m}=D(e),{t:s}=z(),o=U(()=>b(j(e.type).join(",")));return E(()=>{var C;const l=!a.default||e.loading;return n("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},m.value,t.value,h.value],style:[d.value,l?c.value:{}],"aria-busy":e.boilerplate?void 0:l,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:s(e.loadingText),role:e.boilerplate?void 0:"alert"},[l?o.value:(C=a.default)==null?void 0:C.call(a)])}),{}}}),ae=F({__name:"rating-popup",props:{initialRating:{},initialComment:{},messageIndex:{}},setup(e){const i=H(),a=e,t=M({ratingPopup:!1,rating:a.initialRating??0,comment:a.initialComment??""});let d=t.rating,c=t.comment,h=["thumbs-down","thumbs-none","thumbs-up"];function m(){const s=K();if(!s.currentAccount){f.error(f.context(),"no current account");return}if(!s.chatId){f.error(f.context(),"no chat id");return}(t.rating!=d||t.comment!=c)&&(a.messageIndex==null?V.PATCH("/api/chat/{account_id}/{chat_id}/summary",{params:{path:{account_id:s.currentAccount.id,chat_id:s.chatId}},body:{rating:t.rating,comment:t.comment}}).then(()=>{d=t.rating,c=t.comment}):V.PATCH("/api/chat/{account_id}/{chat_id}",{params:{path:{account_id:s.currentAccount.id,chat_id:s.chatId},query:{message_index:a.messageIndex}},body:{rating:t.rating,comment:t.comment}}).then(()=>{d=t.rating,c=t.comment}))}return N(()=>{m()}),O(()=>{m()}),(s,o)=>_(i).isDevMode?(g(),p(k,{key:0,icon:"",variant:"plain",onClick:o[3]||(o[3]=l=>t.ratingPopup=!t.ratingPopup),class:J(_(h)[t.rating+1]),size:"x-small"},{default:r(()=>[t.rating==-1?(g(),p(u,{key:0,icon:"mdi-thumb-down"})):v("",!0),t.rating==0?(g(),p(u,{key:1,icon:"mdi-thumb-up-outline"})):v("",!0),t.rating==1?(g(),p(u,{key:2,icon:"mdi-thumb-up"})):v("",!0),n(q,{activator:"parent"},{default:r(()=>[n(G,null,{default:r(()=>[n(W,{class:"d-inline-flex pa-2 pt-0",style:{"min-width":"400px"}},{default:r(()=>[n(X,{dense:"",class:"align-end"},{default:r(()=>[n(x,{cols:"auto"},{default:r(()=>[n(k,{icon:"",color:t.rating==1?"success":"light",onClick:o[0]||(o[0]=l=>t.rating=t.rating==1?0:1),size:"x-small"},{default:r(()=>[n(u,{icon:"mdi-thumb-up"})]),_:1},8,["color"])]),_:1}),n(x,{cols:"auto"},{default:r(()=>[n(k,{icon:"",color:t.rating==-1?"error":"light",onClick:o[1]||(o[1]=l=>t.rating=t.rating==-1?0:-1),size:"x-small"},{default:r(()=>[n(u,{icon:"mdi-thumb-down"})]),_:1},8,["color"])]),_:1}),n(x,null,{default:r(()=>[n(Y,{"hide-details":"",density:"compact",variant:"underlined",placeholder:"Optional Comment",modelValue:t.comment,"onUpdate:modelValue":o[2]||(o[2]=l=>t.comment=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])):v("",!0)}}),de=Q(ae,[["__scopeId","data-v-72e3de72"]]);export{de as R,le as V};
